<VirtualHost *:${PORT}>
    ServerAdmin webmaster@localhost
    DocumentRoot ${APACHE_DOCUMENT_ROOT}

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory ${APACHE_DOCUMENT_ROOT}>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Security headers
        Header always set X-Content-Type-Options "nosniff"
        Header always set X-Frame-Options "SAMEORIGIN"
        Header always set X-XSS-Protection "1; mode=block"
        
        # Disable directory listing
        Options -Indexes
        
        # Enable rewrite engine
        RewriteEngine On
        
        # Redirect to public directory if not already there
        RewriteCond %{REQUEST_URI} !^/public/
        RewriteRule ^(.*)$ /public/$1 [L]
    </Directory>

    # Disable server signature
    ServerSignature Off
    
    # Disable SSL for this virtual host
    SSLEngine off
</VirtualHost>
